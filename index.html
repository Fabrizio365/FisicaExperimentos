<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Circuitos El√©ctricos Avanzado</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ö° Simulador de Circuitos El√©ctricos</h1>
            <p>Dise√±a, conecta y simula circuitos con an√°lisis avanzado y visualizaci√≥n en tiempo real</p>
        </div>

        <div class="main-content">
            <!-- Panel de Herramientas -->
            <div class="toolbar">
                <h3>üîß Componentes</h3>
                <button class="component-btn" data-mode="resistor">üî≤ Resistencia</button>
                <button class="component-btn" data-mode="voltage">üîã Fuente de Voltaje</button>
                <button class="component-btn" data-mode="current">‚ö° Fuente de Corriente</button>
                <button class="component-btn" data-mode="capacitor">üîã Capacitor</button>
                <button class="component-btn" data-mode="inductor">üåÄ Inductor</button>
                <button class="component-btn" data-mode="diode">üî∫ Diodo</button>
                <button class="component-btn" data-mode="wire">üìè Cable</button>
                <button class="component-btn" data-mode="ground">‚ö° Tierra</button>
                
                <h3 style="margin-top: 20px;">‚öôÔ∏è Controles</h3>
                <button class="component-btn clear-btn" id="clearBtn">üóëÔ∏è Limpiar</button>
                <button class="component-btn" data-mode="delete">‚ùå Eliminar</button>
                <button class="component-btn" data-mode="move">üëÜ Mover</button>
                <button class="component-btn" data-mode="rotate">üîÑ Rotar</button>
                <button class="component-btn" data-mode="select">üìç Seleccionar</button>
                <button class="component-btn" id="undoBtn">‚Ü∂ Deshacer</button>
                <button class="component-btn" id="redoBtn">‚Ü∑ Rehacer</button>
                
                <h3 style="margin-top: 20px;">üìê Opciones de Cable</h3>
                <label class="checkbox-label">
                    <input type="checkbox" id="orthogonalWires" checked>
                    <span>Cables Ortogonales (90¬∞)</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="freeDrawing">
                    <span>Dibujo Libre</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="snapToGrid" checked>
                    <span>Alinear a Cuadr√≠cula</span>
                </label>
                
                <h3 style="margin-top: 20px;">üé® Visualizaci√≥n</h3>
                <label class="checkbox-label">
                    <input type="checkbox" id="showCurrentFlow">
                    <span>Mostrar Flujo de Corriente</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="showVoltageNodes">
                    <span>Mostrar Nodos de Voltaje</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="animateCurrentFlow">
                    <span>Animar Corriente</span>
                </label>
            </div>

            <!-- √Årea de Trabajo -->
            <div class="canvas-container">
                <canvas id="circuitCanvas" width="800" height="600"></canvas>
                <div class="mode-indicator" id="modeIndicator">Modo: Seleccionar</div>
                <div class="component-info" id="componentInfo"></div>
                <div class="grid-info" id="gridInfo">Cuadr√≠cula: 20px</div>
                <div class="coordinates" id="coordinates">X: 0, Y: 0</div>
            </div>

            <!-- Panel de Resultados y Controles -->
            <div class="results-panel">
                <div class="control-group">
                    <h4>üéõÔ∏è Editor de Componente</h4>
                    <input type="number" id="componentValue" placeholder="Valor (Œ©, V, A, F, H)" step="0.001">
                    <input type="text" id="componentLabel" placeholder="Etiqueta personalizada">
                    <select id="componentUnit">
                        <option value="">Seleccionar unidad</option>
                        <option value="Œ©">Ohmios (Œ©)</option>
                        <option value="kŒ©">Kiloohmios (kŒ©)</option>
                        <option value="MŒ©">Megaohmios (MŒ©)</option>
                        <option value="V">Voltios (V)</option>
                        <option value="mV">Milivoltios (mV)</option>
                        <option value="A">Amperios (A)</option>
                        <option value="mA">Miliamperios (mA)</option>
                        <option value="ŒºA">Microamperios (ŒºA)</option>
                        <option value="F">Faradios (F)</option>
                        <option value="ŒºF">Microfaradios (ŒºF)</option>
                        <option value="nF">Nanofaradios (nF)</option>
                        <option value="H">Henrios (H)</option>
                        <option value="mH">Milihenrios (mH)</option>
                        <option value="ŒºH">Microhenrios (ŒºH)</option>
                    </select>
                    <input type="color" id="componentColor" value="#3498db" title="Color del componente">
                    <button class="calc-btn" id="updateComponentBtn">Actualizar Componente</button>
                </div>

                <div class="control-group">
                    <h4>üî¨ Simulaci√≥n Avanzada</h4>
                    <div class="simulation-controls">
                        <button class="calc-btn" id="playSimulation">‚ñ∂Ô∏è Iniciar</button>
                        <button class="calc-btn" id="pauseSimulation" disabled>‚è∏Ô∏è Pausar</button>
                        <button class="calc-btn" id="simulateOnce">üîÑ Simular Una Vez</button>
                        <button class="calc-btn" id="resetSimulation">‚èπÔ∏è Detener</button>
                    </div>
                    
                    <div class="slider-control">
                        <label>
                            <span>Velocidad de Simulaci√≥n:</span>
                            <input type="range" id="simulationSpeed" min="100" max="3000" value="500">
                            <span id="speedDisplay">500ms</span>
                        </label>
                    </div>
                    
                    <div class="analysis-controls">
                        <button class="calc-btn" id="analyzeCircuit">üìä An√°lisis Completo</button>
                        <button class="calc-btn" id="exportData">üíæ Exportar Datos</button>
                        <button class="calc-btn" id="importData">üìÇ Importar Circuito</button>
                        <button class="calc-btn" id="generateReport">üìã Generar Reporte</button>
                    </div>
                </div>

                <div class="control-group">
                    <h4>üî• An√°lisis Espec√≠fico</h4>
                    <select id="componentSelect">
                        <option value="">Seleccionar Componente</option>
                    </select>
                    <div class="analysis-buttons">
                        <button class="calc-btn" id="jouleLawBtn">Ley de Joule</button>
                        <button class="calc-btn" id="voltageDropsBtn">Ca√≠das de Voltaje</button>
                        <button class="calc-btn" id="powerAnalysisBtn">An√°lisis de Potencia</button>
                        <button class="calc-btn" id="frequencyResponseBtn">Respuesta en Frecuencia</button>
                    </div>
                </div>

                <div class="control-group">
                    <h4>üåä An√°lisis AC/DC</h4>
                    <select id="analysisType">
                        <option value="dc">An√°lisis DC</option>
                        <option value="ac">An√°lisis AC</option>
                        <option value="transient">An√°lisis Transitorio</option>
                    </select>
                    <input type="number" id="frequency" placeholder="Frecuencia (Hz)" step="0.1" value="60">
                    <input type="number" id="timeStep" placeholder="Paso de tiempo (ms)" step="0.1" value="1">
                    <button class="calc-btn" id="advancedAnalysisBtn">Ejecutar An√°lisis</button>
                </div>

                <!-- Panel de Resultados -->
                <div class="results" id="results">
                    <h5>üìà Resultados de Simulaci√≥n</h5>
                    <div id="resultsContent">
                        <p>Dise√±a tu circuito y presiona "Simular" para ver los resultados detallados.</p>
                        <div class="quick-stats" id="quickStats"></div>
                    </div>
                </div>

                <!-- Panel de Gr√°ficos -->
                <div class="charts-container" id="chartsContainer">
                    <h5>üìä Gr√°ficos y Visualizaci√≥n</h5>
                    <div class="chart-controls">
                        <button class="calc-btn" id="showVIChart">Gr√°fico V-I</button>
                        <button class="calc-btn" id="showPowerChart">Gr√°fico de Potencia</button>
                        <button class="calc-btn" id="showFreqResponse">Respuesta en Frecuencia</button>
                    </div>
                    <canvas id="chartCanvas" width="280" height="200"></canvas>
                </div>
            </div>
        </div>

        <!-- Modal para configuraci√≥n avanzada -->
        <div class="modal" id="settingsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>‚öôÔ∏è Configuraci√≥n Avanzada</h3>
                    <span class="close" id="closeModal">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="settings-group">
                        <h4>Precisi√≥n de C√°lculo</h4>
                        <label>
                            Tolerancia de Error:
                            <input type="number" id="errorTolerance" value="0.001" step="0.0001">
                        </label>
                        <label>
                            M√°ximo de Iteraciones:
                            <input type="number" id="maxIterations" value="1000" step="10">
                        </label>
                    </div>
                    
                    <div class="settings-group">
                        <h4>Visualizaci√≥n</h4>
                        <label>
                            Tama√±o de Cuadr√≠cula:
                            <input type="range" id="gridSize" min="10" max="50" value="20">
                            <span id="gridSizeDisplay">20px</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="highQualityRendering" checked>
                            <span>Renderizado de Alta Calidad</span>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="calc-btn" id="saveSettings">Guardar Configuraci√≥n</button>
                    <button class="component-btn" id="resetSettings">Restaurar Valores por Defecto</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="utils/solver.js"></script>
    <script src="components/Component.js"></script>
    <script src="components/Resistor.js"></script>
    <script src="components/VoltageSource.js"></script>
    <script src="components/CurrentSource.js"></script>
    <script src="components/Capacitor.js"></script>
    <script src="components/Inductor.js"></script>
    <script src="components/Diode.js"></script>
    <script src="components/Wire.js"></script>
    <script src="components/Ground.js"></script>
    <script src="components/Circuit.js"></script>
    <script src="main.js"></script>
</body>
</html>
